# KChat 主题色修改和 PWA 安装修复测试指南

## 主题色修改测试

### 1. 开发环境测试
```bash
npm run dev
```

验证项目是否能够正常启动，没有错误。

### 2. 主题色验证
在浏览器中检查以下元素是否显示为浅灰色 (#F8F9FA)：
- 浏览器标签页的图标背景色
- PWA 安装提示的背景色
- 移动设备上的状态栏颜色

## PWA 安装修复测试

### 1. 构建生产版本
```bash
npm run build
```

确保构建过程没有错误。

### 2. 本地测试生产版本
```bash
npm run preview
```

### 3. PWA 安装测试步骤

#### Chrome/Edge 浏览器：
1. 打开应用 URL
2. 在地址栏右侧应该出现安装图标（📱或➕）
3. 点击安装图标，确认能够正常安装
4. 安装后检查应用是否能独立运行
5. 验证应用图标和名称是否正确

#### Firefox 浏览器：
1. 打开应用 URL
2. 右键点击页面，选择"安装 KChat"
3. 确认安装过程正常

#### 移动设备测试：
1. 在手机浏览器中打开应用
2. 应该出现"添加到主屏幕"的提示
3. 确认能够正常添加到主屏幕
4. 验证从主屏幕启动的应用是否正常工作

### 4. Service Worker 验证
1. 打开浏览器开发者工具 (F12)
2. 进入 Application 标签
3. 检查 Service Workers 部分，确认 Service Worker 已注册
4. 检查 Manifest 部分，确认所有配置正确
5. 在 Console 中查看是否有 SW registered 的日志

### 5. 离线功能测试
1. 安装 PWA 后，断开网络连接
2. 验证应用是否能够正常启动（可能显示离线页面）
3. 重新连接网络，验证功能是否恢复正常

## 常见问题排查

### PWA 安装按钮不显示：
1. 确保使用 HTTPS 或 localhost
2. 检查 manifest.json 文件是否可访问
3. 确认 Service Worker 已成功注册
4. 检查浏览器控制台是否有错误信息

### 主题色未生效：
1. 清除浏览器缓存并刷新
2. 确认所有三个配置文件都已更新：
   - index.html
   - public/manifest.json
   - vite.config.ts
3. 重新构建应用

### Service Worker 注册失败：
1. 检查网络连接
2. 确认 /sw.js 文件在构建后存在
3. 查看浏览器控制台的具体错误信息

## 部署注意事项

1. **HTTPS 要求**：PWA 必须通过 HTTPS 提供服务（localhost 除外）
2. **MIME 类型**：确保服务器正确配置了 manifest.json 的 MIME 类型
3. **缓存策略**：部署后可能需要清除浏览器缓存才能看到更改
4. **跨域问题**：确保所有资源都可以正确加载

## 成功标准

✅ 主题色已更改为浅灰色 (#F8F9FA)
✅ PWA 可以在桌面浏览器中正常安装
✅ PWA 可以在移动设备上添加到主屏幕
✅ Service Worker 成功注册
✅ 应用图标和名称正确显示
✅ 离线功能正常工作